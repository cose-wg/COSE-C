add_executable(cose_dumper dumper.c)
target_link_libraries(cose_dumper PRIVATE cose-c)

if(MSVC)
  message("test: ${BUILD_SHARED_LIBS}")
  target_link_libraries(cose_dumper PRIVATE ws2_32)
endif()

if(COSE_C_USE_MBEDTLS)
  target_link_libraries(cose_dumper PRIVATE mbedtls)
  target_include_directories(cose_dumper PRIVATE ${MBEDTLS_INCLUDE_DIRS})
  target_link_libraries(cose_dumper PRIVATE ${MBEDTLS_LIBRARY})
else()
  target_include_directories(cose_dumper PRIVATE ${OPENSSL_INCLUDE_DIR})
  target_link_libraries(cose_dumper PRIVATE ${OPENSSL_LIBRARIES})
endif()

enable_testing()
# add_test ( NAME cose_dumper COMMAND cose_dumper )
